import{q as i,l as a}from"./utils-D17q7IE_.js";import{R as h}from"./RecipeData-zuwZFmIs.js";import{R as o}from"./RecipeList-BCZOlS_U.js";class l{constructor(e,t){this.recipeData=e,this.recipeList=t,this.searchInput=i("#recipe-search"),this.searchBtn=i("#search-btn"),this.dietFilter=i("#diet-filter"),this.cuisineFilter=i("#cuisine-filter"),this.ingredientInput=i("#ingredient-search"),this.ingredientBtn=i("#ingredient-search-btn"),this.resultsTitle=i("#results-title")}init(){this.searchBtn.addEventListener("click",()=>this.handleSearch()),this.searchInput.addEventListener("keypress",e=>{e.key==="Enter"&&(this.handleSearch(),this.closeSuggestions())}),this.suggestionsDropdown=i("#suggestions-dropdown"),this.searchInput.addEventListener("input",()=>this.handleAutocomplete()),document.addEventListener("click",e=>{!this.searchInput.contains(e.target)&&!this.suggestionsDropdown.contains(e.target)&&this.closeSuggestions()}),this.dietFilter.addEventListener("change",()=>this.handleSearch()),this.cuisineFilter.addEventListener("change",()=>this.handleSearch()),this.ingredientBtn.addEventListener("click",()=>this.handleIngredientSearch())}async handleAutocomplete(){const e=this.searchInput.value;if(e.length<3){this.closeSuggestions();return}const t=await this.recipeData.getRecipeAutocomplete(e);this.renderSuggestions(t)}renderSuggestions(e){if(!e||e.length===0){this.closeSuggestions();return}this.suggestionsDropdown.innerHTML="",e.forEach(t=>{const s=document.createElement("div");s.className="suggestion-item",s.textContent=t.title,s.addEventListener("click",()=>{this.searchInput.value=t.title,this.handleSearch(),this.closeSuggestions()}),this.suggestionsDropdown.appendChild(s)}),this.suggestionsDropdown.classList.add("active")}closeSuggestions(){this.suggestionsDropdown.classList.remove("active"),this.suggestionsDropdown.innerHTML=""}async handleSearch(){const e=this.searchInput.value,t=this.dietFilter.value,s=this.cuisineFilter.value;this.recipeList.listElement.innerHTML='<li class="loading-placeholder">Searching recipes...</li>',this.resultsTitle.textContent=e?`Results for "${e}"`:"Filtered Recipes";const c=await this.recipeData.getRecipes(e,t,s);this.recipeList.renderRecipes(c)}async handleIngredientSearch(){const e=this.ingredientInput.value;if(!e)return;this.recipeList.listElement.innerHTML='<li class="loading-placeholder">Finding recipes by ingredients...</li>',this.resultsTitle.textContent=`Results with "${e}"`;const t=await this.recipeData.getRecipesByIngredients(e);this.recipeList.renderRecipes(t)}}a();const n=new h,d=i("#recipe-list"),r=new o(n,d),p=new l(n,r);r.init();p.init();
